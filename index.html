<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ì—ì´ì–¸ì¦ˆ ì—”ë“œ ëœë”ë§ˆì´ì €</title>
<style>
body{margin:0;font-family:system-ui;background:#0b1020;color:#fff}
main{max-width:900px;margin:auto;padding:24px}
button{padding:12px 16px;font-size:16px;border-radius:10px;border:0;cursor:pointer}
select{padding:10px;border-radius:8px}
.card{background:#141a3a;padding:16px;border-radius:14px;margin-top:16px}
h1,h2{margin:0 0 12px}
.item{margin:6px 0}
.small{opacity:.7;font-size:13px}
</style>
</head>
<body>

<main>
  <h1>ì—ì´ì–¸ì¦ˆ ì—”ë“œ ëœë”ë§ˆì´ì €</h1>

  <label>ê²Œì„ ì¢…ë¥˜</label><br>
  <select id="mode">
    <option value="base">ê¸°ë³¸</option>
    <option value="war">ì˜ì›í•œì „ìŸ</option>
    <option value="both" selected>ê¸°ë³¸ + ì˜ì›í•œì „ìŸ</option>
  </select>

  <br><br>
  <button onclick="run()">ğŸ² ë½‘ê¸°</button>

  <div id="result"></div>
</main>

<script>
const PICK = {
  ë„¤ë©”ì‹œìŠ¤:1, ìºë¦­í„°:2, ë³´ì„:2, ìœ ë¬¼:3, ì£¼ë¬¸:4
};

function allowed(mode){
  if(mode==="base") return ["ê¸°ë³¸","ë¬»ë¹„"];
  if(mode==="war") return ["ì˜ì „","ë¬»ë¹„"];
  return ["ê¸°ë³¸","ì˜ì „","ë¬»ë¹„"];
}

function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

async function run(){
  const res = await fetch("data.csv");
  const text = await res.text();
  const lines = text.trim().split(/\r?\n/).slice(1);

  const rows = lines.map(l=>{
    const [c,k,n,e]=l.split(",");
    return {c,k,n,e};
  });

  const mode = document.getElementById("mode").value;
  const ok = allowed(mode);
  const out = document.getElementById("result");
  out.innerHTML="";

  for(const cat in PICK){
    const pool = rows.filter(r=>r.c===cat && ok.includes(r.k));
    const pick = shuffle(pool).slice(0,PICK[cat]);

    const box=document.createElement("div");
    box.className="card";
    box.innerHTML=`<h2>${cat}</h2>`+
      pick.map(p=>`<div class="item">${p.n} <span class="small">${p.e?`(ì—í…Œë¥´ ${p.e})`:""}</span></div>`).join("");
    out.appendChild(box);
  }
}
</script>

</body>
</html>
